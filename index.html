<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>School Information</title>
</head>

<body>
    <div id="output"></div>

    <script>
        // Problem 10: countCalculation
        function countCalculation(school) {
            const {
                departments: {
                    math: { teachers: mathTeachersCount, students: mathStudentsCount },
                    history: { teachers: historyTeachersCount, students: historyStudentsCount },
                },
            } = school;
            return {
                mathTeachersCount,
                historyTeachersCount,
                mathStudentsCount,
                historyStudentsCount,
            };
        }

        // Problem 11: findTopStudent
        function findTopStudent(school, courseName) {
            const { students } = school;
            let topStudent = students[0];
            students.forEach(student => {
                if (student.scores[courseName] > topStudent.scores[courseName]) {
                    topStudent = student;
                }
            });
            return topStudent;
        }

        // Problem 12: addNewDept
        function addNewDept(school, newDepartment) {
            const updatedDepartments = { ...school.departments, ...newDepartment };
            return { ...school, departments: updatedDepartments };
        }

        // Problem 13: highestStudentCountDepartment
        function highestStudentCountDepartment(school) {
            let highestCount = 0;
            let departmentWithHighestCount = '';
            for (const department in school.departments) {
                if (school.departments[department].students > highestCount) {
                    highestCount = school.departments[department].students;
                    departmentWithHighestCount = department;
                }
            }
            return departmentWithHighestCount;
        }

        // Problem 14: generateGreeting
        function generateGreeting(name, language = 'English') {
            const greetings = {
                English: `Hello, ${name}!`,
                Spanish: `Â¡Hola, ${name}!`,
                French: `Bonjour, ${name}!`,
            };
            return greetings[language];
        }

        // Test the functions
        const school = {
            name: "XYZ School",
            establishYear: 1990,
            departments: {
                math: { teachers: 5, students: 150 },
                science: { teachers: 4, students: 120 },
                history: { teachers: 3, students: 100 },
                english: { teachers: 4, students: 130 },
            },
            courses: ["math", "science", "history", "english"],
            students: [
                { name: "Alice", className: "Grade 5", scores: { math: 95, science: 88, history: 85, english: 92 } },
                { name: "Bob", className: "Grade 4", scores: { math: 80, science: 78, history: 92, english: 85 } },
                { name: "Charlie", className: "Grade 5", scores: { math: 88, science: 90, history: 78, english: 88 } },
                { name: "Diana", className: "Grade 4", scores: { math: 92, science: 85, history: 88, english: 90 } },
            ],
        };

        const outputDiv = document.getElementById('output');
        outputDiv.innerHTML += '<pre>' + JSON.stringify(countCalculation(school), null, 2) + '</pre>';
        outputDiv.innerHTML += '<pre>' + JSON.stringify(findTopStudent(school, 'math'), null, 2) + '</pre>';
        const newDepartment = { art: { teachers: 2, students: 50 } };
        outputDiv.innerHTML += '<pre>' + JSON.stringify(addNewDept(school, newDepartment), null, 2) + '</pre>';
        outputDiv.innerHTML += '<pre>' + highestStudentCountDepartment(school) + '</pre>';
        outputDiv.innerHTML += generateGreeting("Alice") + '<br>';
        outputDiv.innerHTML += generateGreeting("Bob", "Spanish") + '<br>';
        outputDiv.innerHTML += generateGreeting("Charlie", "French") + '<br>';
    </script>
</body>

</html>